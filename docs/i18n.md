# Multi-Language Support (i18n)

Tool descriptions and parameter descriptions are fully localised via a single environment variable.

## How It Works

All human-readable strings are stored in locale files under `src/locales/`. At startup the server reads the `MCP_LANG` env var and loads the matching locale. Every tool definition uses the `t()` helper instead of hardcoded strings.

```
src/
  locales/
    types.ts   ← shared Locale / ToolLocale interfaces
    en.ts      ← English strings
    pl.ts      ← Polish strings (canonical, for upstream contribution)
  i18n.ts      ← loader — reads MCP_LANG, exports t()
```

## Selecting a Language

Set the `MCP_LANG` environment variable before starting the server.

| Value          | Language |
| -------------- | -------- |
| `en` (default) | English  |
| `pl`           | Polish   |

### Local / STDIO

```bash
MCP_LANG=pl node dist/fluentcrm-mcp-server.js
```

Or in your `.env` file:

```env
MCP_LANG=en
```

### Render / cloud

Set `MCP_LANG` in the Render dashboard under **Environment** → add variable. The `render.yaml` ships with `MCP_LANG=en` as the default.

## Adding a New Language

1. Create `src/locales/xx.ts` (replace `xx` with the ISO 639-1 code):

```typescript
import type { Locale } from "./types.js";

export const locale: Locale = {
  tools: {
    fluentcrm_list_contacts: {
      description: "Your translation here",
      params: {
        page: "Your param translation",
        // ...
      },
    },
    // ... all 36 tools
  },
};
```

2. Register it in `src/i18n.ts`:

```typescript
import { locale as xx } from "./locales/xx.js";

const locales: Record<string, Locale> = { en, pl, xx };
```

3. Rebuild:

```bash
npm run build
```

## The `t()` Helper

```typescript
import { t } from "./i18n.js";

t("fluentcrm_list_contacts"); // → tool description
t("fluentcrm_list_contacts", "page"); // → param description
```

If a key is missing the function returns the key name as a fallback — no crash.

## Contributing Upstream

The original source repo uses Polish. When contributing PRs back upstream:

- Keep `pl.ts` as the reference — edit it to match any new tools added upstream
- Submit `en.ts` and the i18n infrastructure as a separate PR so maintainers can choose to adopt it
- The `pl.ts` locale is always kept in sync with the upstream Polish strings
